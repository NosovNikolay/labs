# Лабораторна робота №24. Потоки

Мета: набути навичок розробки программ, що використовують потоки

## 1 Вимоги
### 1.1	Розробник
- Носов Микола Володимирович
- Студент групи КІТ-120Б
- 10.05.2021

### 1.2 Загальне завдання
Поширити попередню лабораторну роботу таким чином:
1. Використовувати функції cin/cout замість printf/scanf
2. Усі конкатенації рядків замінити на використання stringstream
3. Замінити метод виводу інформації про об’єкт на метод, що повертає рядок-інформацію про об’єкт, який далі можна виводити на екран
4. Замінити метод вводу інформації про об’єкт на метод, що приймає рядок з інформацією про об’єкт, обробляє його та створює об’єкт на базі цієї інформації
5. Поширити клас-список, шляхом реалізації методів роботи з файлами за допомогою файлових потоків fstream
6. Продемонструвати відсутність витоків пам’яті
7. Продемонструвати роботу розроблених методів за допомогою модульних тестів
8. Не використовувати конструкцію “using namespace std”

### 1.3 Індивідуальне завдання
Виконати завдання з категорії "відмінно"

---

## 2 Опис програми

### 2.1 Функціональне призначення
- Програма призначена для демонстрації вирішення завдань лабораторної роботи №24

### 2.2 Опис логічної структури
**Структура проекту**

```
lab23
├── doc
│   ├── assets
│   │   ├── result.png
│   │   ├── test.png
│   │   └── valgrind.png
│   └── report.md
├── Doxyfile
├── Makefile
├── README.md
├── src
│   ├── barray.cpp
│   ├── barray.hpp
│   ├── backpack.cpp
│   ├── backpack.hpp
│   ├── brand.cpp
│   ├── brand.hpp
│   └── main.cpp
└── test
    └── test.cpp
```

**Призначення та структура розроблених методів**

```c
int main(void)
```

Призначення: головна функція

- Повертає код успішного виходу із програми (0)

---

```c
Backpack* GetBackpack(unsigned index) const;
```

Призначення: повертає рюкзак з колекції 

Опис роботи:
- Перевіряє коректність індексу
- Повертає рюкзак с заданим індексом 

---

```c
Backpack* GetBackpackWithLowestVolume() const;
```

Призначення: повертає рюкзак з мінімальним об'ємом

Опис роботи:
- Перевіряє коректність індексу
- Повертає рюкзак з мінімальним об'ємом

---

```c
void Print();
```

Призначення: виводить на екран всі рюкзаки з колекції

Опис роботи:
- Виводить на екран всі рюкзаки з колекції

---

```c
void AddElement(Backpack* backpack);
```

Призначення: додає рюкзак в колекцію 

Опис роботи:
- Перевіряє наявність вільного місця
- Додає рюкзак в колекцію 

---

```c
void DeleteElement(unsigned index);
```

Призначення: видаляє рюкзак з колекції 

Опис роботи:
- Перевіряє коректність індексу
- Видаляє з колекції

---

```c
Backpack* Backpack::FillFromString(string str)
```
Призначення:
- заповнює змінну типу рюкзак інформацією з рядка

Опис роботи:
- заповнення змінної по кожному полю 

```c
string Backpack::ToString() const
```
Призначення:
- заповнює рядок інформацією зі змінної типа рюкзак

Опис роботи:
- заповнення рядка та повернення його з функції

```c
void Barray::ReadFromFile(string filename)
```
Призначення:
- читання массиву рюзаків з файлу

Опис роботи:
- відкриття файлу
- очищення поточних даних массиву
- заповнення елементів за допомогою методу FillFromString
- зчитування
- закриття файлу

```c
void Barray::WriteToFile(string filename)
```
Призначення:
- запис данних елементів масиву у файл

Опис роботи:
- відкриття файлу
- переведення інформації елементів масиву у рядок
- запис рядків у файл
- закриття файлу

Гетери і сетери для полів рюкзака:

```c
unsigned int Backpack::GetVolume() const{
    return volume;
}

string Backpack::GetColor() const{
    return color;
}

string Backpack::GetAppointment() const{
    return appointment;
}

Brand* Backpack::GetBrand() const{
    return brand;
}

bool Backpack::GetLaptopComparament() const{
    return laptop_comparament;
}

void Backpack::SetAppointment(string appointment_){
    appointment = appointment_;
}

void Backpack::SetBrand(Brand* brand_) {

  if (brand != nullptr) {
    delete brand;
  }
  brand = brand_;
}

void Backpack::SetLaptopComparament(bool laptop_comparament_){
    laptop_comparament = laptop_comparament_;
}

void Backpack::SetVolume(unsigned volume_){
    volume = volume_;
}

void Backpack::SetColor(string color_){
    color = color_;
}
```
---

### Важливі фрагменти програми:

Перевірка займаємої памʼяті при виклику деструктора 

```c
Backpack::~Backpack(){
    if(brand != nullptr)
        delete brand;
}
```
---

**Результати перевірки за допомогою Valgrind**

Результати перевірки подані на рисунку 1

![](assets/valgrind.PNG)

Рисунок 1 - Результати перевірки за допомогою Valgrind

---

**Результати модульного тестування**

Результати модульного тестування подані на рисунку 2

![](assets/test.PNG)

Рисунок 2 - Результати модульного тестування

---

## 3 Варіанти використання
Для демонстрації результатів кожної задачі використовується виконання програми у консолі. Швидко зібрати та запустити програму можна за допомогою команди "make run". На рисунку 3 зображені результати роботи програми:

![](assets/result.PNG)

Рисунок 3 - Результати роботи програми

---

## Висновки
Набув навичок розробки програм, що використовують потоки